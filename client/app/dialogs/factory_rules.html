<!--
 Copyright (C) 2016  DING Changchang (of Canaan Creative)

 This file is part of Avalon Management System (AMS).

 AMS is free software: you can redistribute it and/or modify
 it under the terms of the GNU General Public License as published by
 the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.

 AMS is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with AMS. If not, see <http://www.gnu.org/licenses/>.
<object
		id="barcode" type="application/pdf"
		data="{{vm.printOrder(vm.order.uid)}}"
		height="0" width="0">
</object>
-->
<md-dialog aria-label="Rules" flex="85">
	<md-dialog-content style="height: 90%">
		<div layout="column" class="md-dialog-content" layout-fill>
			<div layout="row" flex>
				<md-content layout="column" flex="60">
					<h3 class="md-subhead">编码规则</h3>
					<md-content flex layout="column">
						<div layout="row" layout-align="center start" class="setting-header">
							<h3 class="md-subhead" flex="20">编码前缀</h3>
							<h3 class="md-subhead" flex="35">名称</h3>
							<h3 class="md-subhead" flex="35">型号</h3>
							<h3 class="md-subhead" flex="10"></h3>
						</div>
						<md-content flex layout="column">
							<div ng-repeat="r in vm.data.rules.code" layout="row" class="setting-column">
								<md-input-container flex="20">
									<input aria-label="header" ng-model="r.header" />
								</md-input-container>
								<md-input-container flex="35">
									<input aria-label="name" ng-model="r.name" />
								</md-input-container>
								<md-input-container flex="35">
									<input aria-label="model" ng-model="r.model" />
								</md-input-container>
								<div flex="10" layout="row">
									<md-button ng-click="vm.deleteRules(r, 'code')"
											aria-label="delete"
											class="md-raised md-warn ams-button">
										<ng-md-icon icon="delete">
									</md-button>
								</div>
							</div>
							<div layout="row" class="setting-column">
								<div flex="20"></div>
								<div flex="35"></div>
								<div flex="35"></div>
								<div flex="10" layout="row">
									<md-button ng-click="vm.addRules('code')"
											aria-label="add"
											class="md-raised md-primary ams-button">
										<ng-md-icon icon="add"></ng-md-icon>
									</md-button>
								</div>
							</div>
						</md-content>
					</md-content>
				</md-content>
				<md-content layout="column" flex>
					<h3 class="md-subhead">依赖规则</h3>
					<md-content flex layout="column">
						<div layout="row" layout-align="center start" class="setting-header">
							<h3 class="md-subhead" flex="30">产品前缀</h3>
							<h3 class="md-subhead" flex="30">组件前缀</h3>
							<h3 class="md-subhead" flex="30">组件数量</h3>
							<h3 class="md-subhead" flex="10"></h3>
						</div>
						<md-content flex layout="column">
							<div ng-repeat="r in vm.data.rules.depend" layout="row" class="setting-column">
								<md-input-container flex="30">
									<input aria-label="pheader" ng-model="r.product_header" ng-disabled />
								</md-input-container>
								<md-input-container flex="30">
									<input aria-label="cheader" ng-model="r.component_header" ng-disabled />
								</md-input-container>
								<md-input-container flex="30">
									<input aria-label="cheader" ng-model="r.component_count" ng-disabled />
								</md-input-container>
								<div flex="10" layout="row">
									<md-button ng-click="vm.deleteRules(r, 'depend')"
											aria-label="delete"
											class="md-raised md-warn ams-button">
										<ng-md-icon icon="delete">
									</md-button>
								</div>
							</div>
							<div layout="row" class="setting-column">
								<div flex="30"></div>
								<div flex="30"></div>
								<div flex="30"></div>
								<div flex="10" layout="row">
									<md-button ng-click="vm.addRules('depend')"
											aria-label="add"
											class="md-raised md-primary ams-button">
										<ng-md-icon icon="add"></ng-md-icon>
									</md-button>
								</div>
							</div>
						</md-content>
					</md-content>
				</md-content>
			</div>
		</div>
	</md-dialog-content>
	<md-dialog-actions>
		<md-button aria-label="save" class="md-raised md-primary" ng-click="vm.setRules()">保存</md-button>
		<md-button aria-label="reload" class="md-raised md-primary" ng-click="vm.reload()">重新载入</md-button>
		<md-button aria-label="close" class="md-raised md-primary" ng-click="vm.close()">关闭</md-button>
	</md-dialog-actions>
</md-dialog>
