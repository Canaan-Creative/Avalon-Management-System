<!--
 Copyright (C) 2016  DING Changchang (of Canaan Creative)

 This file is part of Avalon Management System (AMS).

 AMS is free software: you can redistribute it and/or modify
 it under the terms of the GNU General Public License as published by
 the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.

 AMS is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with AMS. If not, see <http://www.gnu.org/licenses/>.
-->
<md-content layout="row" layout-align="center center" flex ng-if="!vm.loaded && vm.auth.success">
	<md-progress-circular class="md-accent" md-mode="indeterminate"></md-progress-circular>
</md-content>
<md-card ng-if="!!vm.loaded && vm.auth.success" flex layout="row">
	<md-card-header>
		<md-card-header-text>
			<div class="md-title">Orders</div>
		</md-card-header-text>
		<span flex="auto"></span>
		<md-button class="md-raised md-primary" ng-click="vm.searchOrder">Search</md-button>
		<md-button class="md-raised md-primary" ng-click="vm.newOrder">New</md-button>
	</md-card-header>
	<md-card-content flex>
		<md-table-container>
			<table md-table md-progress="deferred">
				<thead md-head>
					<tr md-row>
						<th md-column ng-repeat="column in vm.table" ng-cloak>
							{{ column.name }}
							<md-tooltip ng-if="column.tooltip !== undefined" ng-cloak>
								{{ column.tooltip }}
							</md-tooltip>
						</th>
					</tr>
				</thead>
				<tbody md-body>
					<tr md-row md-on-select="vm.openOrder" ng-repeat="order in vm.data.orders">
						<td md-cell ng-repeat="column in vm.table" ng-cloak>
							{{ column.value(order) }}
						</td>
					</tr>
				</tbody>
			</table>
		</md-table-container>
	</md-card-contain>
</md-card>
