<md-content layout="row" layout-align="center center" flex ng-if="!vm.data.nodes">
	<md-progress-circular class="md-accent" md-mode="indeterminate"></md-progress-circular>
</md-content>

<md-content layout="row" flex ng-if="!!vm.data.nodes">
	<!-- Node List -->
	<md-content class="node" layout="row">
		<md-list flex>
			<md-list-item
					ng-repeat="node in vm.data.nodes"
					class="node-selected-{{ node.selected }}">
				<a ng-click="vm.select(node)">
					<md-item-content md-ink-ripple layout="row" layout-align="start center">
						<div class="inset">
							{{ node.ip + ':' + node.port }}
						</div>
						<md-divider></md-divider>
					</md-item-content>
				</a>
			</md-list-item>
		</md-list>
	</md-content>

	<md-content layout="row" flex>
		<md-tabs
				md-selected="selectedIndex"
				md-stretch-tabs="always"
				ng-if="!!vm.status.node"
				md-no-ink flex>

			<!-- Summary -->
			<md-tab md-on-select="vm.getTab('summary')">
				<md-tab-label>Summary</md-tab-label>
				<md-tab-body>
					<md-content flex>

						<md-card>
							<md-card-header>
								<md-card-header-text>
									<div class="md-title">Pool Status</div>
								</md-card-header-text>
							</md-card-header>
							<md-card-content layout="row" ng-if="!vm.status.poolCardLoaded" layout-align="center center">
								<md-progress-circular class="md-accent" md-mode="indeterminate"></md-progress-circular>
							</md-card-content>
							<md-card-content ng-if="vm.status.poolCardLoaded">
								<md-data-table-container>
									<table md-data-table md-progress="deferred">
										<thead>
											<tr>
												<th ng-repeat="column in vm.poolTable" name="{{ column.name }}">
													<md-tooltip ng-if="column.tooltip !== undefined">
														{{ column.tooltip }}
													</md-tooltip>
												</th>
											</tr>
										</thead>
										<tbody>
											<tr ng-repeat="pool in vm.data.pool">
												<td ng-repeat="column in vm.poolTable">
													{{ column.value(pool) }}
												</td>
											</tr>
										</tbody>
									</table>
								</md-data-table-container>
							</md-card-content>
						</md-card>

					</md-content>
				</md-tab-body>
			</md-tab>

			<!-- Devices -->
			<md-tab md-on-select="vm.getTab('device')">
				<md-tab-label>Devices</md-tab-label>
				<md-tab-body>
					<md-content ng-if="!vm.status.tabLoaded" layout="row" layout-fill layout-align="center center">
						<md-progress-circular class="md-accent" md-mode="indeterminate"></md-progress-circular>
					</md-content>
					<md-content ng-if="vm.status.tabLoaded">
						<md-data-table-container>
							<table md-data-table>
								<thead md-order="vm.sortIndex">
									<tr>
										<th
											ng-repeat="column in vm.deviceTable"
											name="{{ column.name }}"
											order-by="{{ column.index }}">
										</th>
									</tr>
								</thead>
								<tbody>
									<tr ng-repeat="device in vm.data.device | orderBy: vm.getDeviceTable() : vm.sortReverse">
										<td ng-repeat="column in vm.deviceTable">
											{{ column.value(device) }}
										</td>
									</tr>
								</tbody>
							</table>
						</md-data-table-container>
					</md-content>
				</md-tab-body>
			</md-tab>

			<!-- Modules -->
			<md-tab md-on-select="vm.getTab('module')">
				<md-tab-label>Modules</md-tab-label>
				<md-tab-body>
					<md-content ng-if="!vm.status.tabLoaded" layout="row" layout-fill layout-align="center center">
						<md-progress-circular class="md-accent" md-mode="indeterminate"></md-progress-circular>
					</md-content>
					<md-content ng-if="vm.status.tabLoaded">
						<md-data-table-container>
							<table md-data-table>
								<thead md-order="vm.sortIndex">
									<tr>
										<th name="LED"></th>
										<th
											ng-repeat="column in vm.moduleTable"
											name="{{ column.name }}"
											order-by="{{ column.index }}">
										</th>
									</tr>
								</thead>
								<tbody>
									<tr ng-repeat="module in vm.data.module | orderBy: vm.getModuleTable() : vm.sortReverse"
											class="dark-{{ module.theme }}">
										<td>
											<md-switch
												ng-model="module.led"
												ng-true-value="1"
												ng-false-value="0"
												ng-change="vm.setSingleLED(module)"
												aria-label="LED">
											</md-switch>
										</td>
										<td ng-repeat="column in vm.moduleTable">
											{{ column.value(module) }}
										</td>
									</tr>
								</tbody>
							</table>
						</md-data-table-container>
					</md-content>
				</md-tab-body>
			</md-tab>

			<!-- Config -->
			<md-tab md-on-select="vm.getTab('config')">
				<md-tab-label>Config</md-tab-label>
				<md-tab-body>
					<md-content layout="row" layout-fill ng-if="!vm.status.tabLoaded" layout-align="center center">
						<md-progress-circular class="md-accent" md-mode="indeterminate"></md-progress-circular>
					</md-content>
					<md-content
							ng-if="vm.status.tabLoaded"
							layout-align="center center"
							layout="row" flex>
						<div layout="column">
							<h4>Node</h4>
							<md-input-container>
								<label>NTP</label>
								<input ng-model="vm.data.config.ntp_enable" disabled="{{ vm.auth }}"/>
							</md-input-container>
							<md-input-container>
								<label>API Allow</label>
								<input ng-model="vm.data.config.api_allow" disabled="{{ vm.auth }}"/>
							</md-input-container>
							<md-input-container>
								<label>More Options</label>
								<input ng-model="vm.data.config.more_options" disabled="{{ vm.auth }}"/>
							</md-input-container>

							<md-divider></md-divider>

							<h4>Module</h4>
							<div layout="row">
								<md-input-container>
									<label>Fan</label>
									<input ng-model="vm.data.config.fan" disabled="{{ vm.auth }}"/>
								</md-input-container>
								<md-input-container>
									<label>Voltage</label>
									<input ng-model="vm.data.config.chip_voltage" disabled="{{ vm.auth }}"/>
								</md-input-container>
								<md-checkbox
										ng-model="vm.data.config.autoAdjust"
										layout-align="center center"
										layout="row"
										disabled="{{ vm.auth }}">
								<small class="md-caption">Auto Adjust</small>
								</md-checkbox>
							</div>

							<md-divider></md-divider>

							<h4>Pool</h4>
							<md-input-container>
								<label>Pool Balance</label>
								<input ng-model="vm.data.config.pool_balance" disabled="{{ vm.auth }}"/>
							</md-input-container>
							<div layout="row">
								<md-input-container flex="50">
									<label>Address</label>
									<input ng-model="vm.data.config.pool1url" disabled="{{ vm.auth }}"/>
								</md-input-container>
								<md-input-container flex="25">
									<label>Worker</label>
									<input ng-model="vm.data.config.pool1user" disabled="{{ vm.auth }}"/>
								</md-input-container>
								<md-input-container flex="25">
									<label>Password</label>
									<input ng-model="vm.data.config.pool1pw" disabled="{{ vm.auth }}"/>
								</md-input-container>
							</div>
							<div layout="row">
								<md-input-container flex="50">
									<label>Address</label>
									<input ng-model="vm.data.config.pool2url" disabled="{{ vm.auth }}"/>
								</md-input-container>
								<md-input-container flex="25">
									<label>Worker</label>
									<input ng-model="vm.data.config.pool2user" disabled="{{ vm.auth }}"/>
								</md-input-container>
								<md-input-container flex="25">
									<label>Password</label>
									<input ng-model="vm.data.config.pool2pw" disabled="{{ vm.auth }}"/>
								</md-input-container>
							</div>
							<div layout="row">
								<md-input-container flex="50">
									<label>Address</label>
									<input ng-model="vm.data.config.pool3url" disabled="{{ vm.auth }}"/>
								</md-input-container>
								<md-input-container flex="25">
									<label>Worker</label>
									<input ng-model="vm.data.config.pool3user" disabled="{{ vm.auth }}"/>
								</md-input-container>
								<md-input-container flex="25">
									<label>Password</label>
									<input ng-model="vm.data.config.pool3pw" disabled="{{ vm.auth }}"/>
								</md-input-container>
							</div>

						</div>
					</md-content>
				</md-tab-body>
			</md-tab>

		</md-tabs>
	</md-content>
</md-content>
